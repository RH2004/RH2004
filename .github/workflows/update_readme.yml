name: Update README Dynamic Images

on:
  schedule:
    # Runs every day at 00:00 UTC
    - cron: '0 0 * * *'
  workflow_dispatch:

jobs:
  update-images:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Set up directory
        run: |
          mkdir -p assets/readme

      - name: Download and cache dynamic images
        run: |
          # Define username for dynamic links
          USERNAME="rh2004"
          
          # Header and Footer
          curl -o assets/readme/header.svg "https://capsule-render.vercel.app/api?type=waving&color=gradient&height=200&section=header&text=Hi%20ðŸ‘‹,%20I'm%20Reda%20HEDDAD&fontSize=50&animation=fadeIn&fontAlignY=35"
          curl -o assets/readme/footer.svg "https://capsule-render.vercel.app/api?type=waving&color=gradient&height=100&section=footer"
          
          # Profile Views
          curl -o assets/readme/profile_views.svg "https://komarev.com/ghpvc/?username=$USERNAME&label=Profile%20views&color=0e75b6&style=flat-square"
          
          # GitHub Readme Stats (Stats Card and Top Langs )
          curl -o assets/readme/stats_card.svg "https://github-readme-stats-sigma-five.vercel.app/api?username=$USERNAME&show_icons=true&theme=radical&hide_border=true&count_private=true"
          curl -o assets/readme/top_langs.svg "https://github-readme-stats-sigma-five.vercel.app/api/top-langs?username=$USERNAME&show_icons=true&theme=radical&hide_border=true&layout=compact"
          
          # GitHub Streak
          curl -o assets/readme/streak_stats.svg "https://github-readme-streak-stats.herokuapp.com/?user=$USERNAME&theme=radical&hide_border=true"
          
          # GitHub Trophies
          curl -o assets/readme/trophy.svg "https://github-profile-trophy.vercel.app/?username=$USERNAME&theme=radical&no-bg=true&margin-w=15"
          
          # Quote
          curl -o assets/readme/quote.svg "https://quotes-github-readme.vercel.app/api?type=horizontal&theme=radical"

      - name: Commit and push changes
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: 'chore: Update and cache dynamic README images'
          file_pattern: 'assets/readme/*.svg'
          branch: main
